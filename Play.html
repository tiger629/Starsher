<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Watch Live â€“ Zee5</title>
  <meta name="theme-color" content="#e11d48" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.6/shaka-player.compiled.min.js"></script>
  <style>
    #customLogoWrapper {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 100px;
      height: 100px;
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(6px);
      padding: 8px;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
    }

    #customLogo {
      width: 100%;
      height: auto;
      border-radius: 12px;
      opacity: 0.9;
    }
  </style>
</head>

<body class="bg-gray-100 text-gray-900 min-h-screen font-sans">

  <!-- Navigation -->
  <nav class="bg-white shadow-md">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <a href="index.html" class="text-xl font-bold text-red-600">IPTV07INDIA</a>
      <div class="flex space-x-4 text-sm">
        <a href="index.html" class="text-gray-700 hover:text-red-600">Home</a>
        <a href="#" class="text-gray-700 hover:text-red-600">Live TV</a>
        <a href="#" class="text-gray-700 hover:text-red-600">Search</a>
      </div>
    </div>
  </nav>

  <!-- Video Player -->
  <div class="relative max-w-5xl mx-auto mt-6 rounded-xl overflow-hidden shadow-lg">
    <div id="customLogoWrapper">
      <img id="customLogo" src="https://via.placeholder.com/150" alt="Overlay Logo" />
    </div>
    <video id="video" controls autoplay class="w-full bg-black aspect-video"></video>
  </div>

  <!-- Program Info Card -->
  <div class="max-w-4xl mx-auto mt-6 bg-white p-6 rounded-xl shadow-md">
    <div class="flex items-center gap-4">
      <div class="w-20 h-20 bg-gray-200 rounded-full overflow-hidden">
        <img id="channel-logo" src="https://iili.io/Jn2BLen.gif" alt="Channel Logo" class="w-full h-full object-cover" />
      </div>
      <div class="flex-1">
        <h2 id="program-title" class="text-lg font-bold">Loading...</h2>
        <p id="channel-name" class="text-md text-gray-600 font-bold">Loading...</p>
        <p id="program-time" class="text-sm text-gray-500">Loading...</p>
      </div>
    </div>
  </div>

  <!-- Join Buttons -->
  <div class="flex justify-center gap-4 mt-6">
    <a href="https://t.me/IPTV07INDIA" target="_blank" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md">
      Join Telegram
    </a>
  </div>

  <!-- Error Message -->
  <div id="error" class="text-center mt-4 text-red-600 font-semibold"></div>

  <!-- Shaka Player Logic -->
  <script>
    const tvgId = new URLSearchParams(window.location.search).get('id');
    const videoElement = document.getElementById('video');
    const customLogo = document.getElementById('customLogo');
    const errorEl = document.getElementById('error');
    const playlistUrl = 'https://raw.githubusercontent.com/tiger629/m3u/refs/heads/main/joker.m3u';

    async function init() {
      if (!tvgId) {
        errorEl.textContent = 'No channel ID provided.';
        return;
      }

      try {
        const res = await fetch(playlistUrl);
        const text = await res.text();
        const lines = text.split('\n');
        let found = false;

        for (let i = 0; i < lines.length; i++) {
          if (lines[i].startsWith('#KODIPROP') && lines[i + 1]?.includes(`tvg-id="${tvgId}"`)) {
            const license = lines[i].split('=')[1].trim();
            const infoLine = lines[i + 1];
            const streamUrl = lines[i + 2];
            const match = infoLine.match(/tvg-logo="([^"]+)".*?,\s*(.*)/);

            if (match) {
              const logo = match[1];
              const name = match[2];
              const [keyId, key] = license.split(':');

              document.getElementById('program-title').textContent = name;
              document.getElementById('channel-name').textContent = tvgId.toUpperCase();
              document.getElementById('channel-logo').src = logo;
              customLogo.src = logo;

              const player = new shaka.Player(videoElement);
              await player.configure({
                drm: { clearKeys: { [keyId]: key } }
              });

              await player.load(streamUrl);
              found = true;
              break;
            }
          }
        }

        if (!found) {
          errorEl.textContent = 'No matching channel found in playlist.';
        }
      } catch (err) {
        console.error(err);
        errorEl.textContent = 'Failed to load channel. Please check your network or playlist.';
      }
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>

  <!-- Disable Right Click & DevTools -->
  <script>
    document.addEventListener('contextmenu', e => e.preventDefault());

    document.addEventListener('keydown', function (e) {
      if (
        e.key === 'F12' ||
        (e.ctrlKey && e.shiftKey && ['I', 'C', 'J'].includes(e.key)) ||
        (e.ctrlKey && ['U', 'S'].includes(e.key))
      ) {
        e.preventDefault();
        return false;
      }
    });

    let devtools = { open: false };
    const threshold = 160;
    const emitEvent = (state) => {
      if (state !== devtools.open) {
        devtools.open = state;
        if (state) {
          document.body.innerHTML = '<h1 style="color:red;text-align:center;margin-top:20%;">DevTools is not allowed!</h1>';
        }
      }
    };

    setInterval(function () {
      const widthThreshold = window.outerWidth - window.innerWidth > threshold;
      const heightThreshold = window.outerHeight - window.innerHeight > threshold;
      emitEvent(widthThreshold || heightThreshold);
    }, 500);
  </script>

</body>
</html>








